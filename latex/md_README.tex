\chapter{Universal Timestamp}
\hypertarget{md_README}{}\label{md_README}\index{Universal Timestamp@{Universal Timestamp}}
\label{md_README_autotoc_md0}%
\Hypertarget{md_README_autotoc_md0}%
 \href{https://en.wikipedia.org/wiki/C11_(C_standard_revision)}{\texttt{ }} \mbox{[}\mbox{]}(LICENSE)

A {\bfseries{deterministic, cross-\/platform timestamp library}} for C with nanosecond precision.\hypertarget{md_README_autotoc_md1}{}\doxysection{\texorpdfstring{Features}{Features}}\label{md_README_autotoc_md1}

\begin{DoxyItemize}
\item ✅ {\bfseries{Always UTC}} — No timezone ambiguity
\item ✅ {\bfseries{Always ISO-\/8601}} — {\ttfamily YYYY-\/\+MM-\/\+DDTHH\+:MM\+:SS.\+nnnnnnnnnZ}
\item ✅ {\bfseries{Nanosecond precision}} — Full 9-\/digit fractional seconds
\item ✅ {\bfseries{Monotonic mode}} — Timestamps never go backwards
\item ✅ {\bfseries{Strict \& lenient parsing}} — Validate or be flexible
\item ✅ {\bfseries{Zero dependencies}} — No locale, no timezone files
\item ✅ {\bfseries{6 calendar systems}} — Gregorian, Thai, Dangi, Minguo, Japanese, ISO week
\end{DoxyItemize}\hypertarget{md_README_autotoc_md2}{}\doxysection{\texorpdfstring{Quick Start}{Quick Start}}\label{md_README_autotoc_md2}

\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{preprocessor}{\#include\ "{}universal\_timestamp.h"{}}}
\DoxyCodeLine{\textcolor{preprocessor}{\#include\ <stdio.h>}}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keywordtype}{int}\ main(\textcolor{keywordtype}{void})\ \{}
\DoxyCodeLine{\ \ \ \ \textcolor{comment}{/*\ Get\ current\ UTC\ time\ */}}
\DoxyCodeLine{\ \ \ \ ut\_timestamp\_t\ now\ =\ ut\_now();}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \textcolor{comment}{/*\ Format\ to\ ISO-\/8601\ */}}
\DoxyCodeLine{\ \ \ \ \textcolor{keywordtype}{char}\ buf[UT\_MAX\_STRING\_LEN];}
\DoxyCodeLine{\ \ \ \ ut\_format(now,\ buf,\ \textcolor{keyword}{sizeof}(buf),\ \textcolor{keyword}{true});}
\DoxyCodeLine{\ \ \ \ printf(\textcolor{stringliteral}{"{}Now:\ \%s\(\backslash\)n"{}},\ buf);}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \textcolor{comment}{/*\ Parse\ a\ timestamp\ */}}
\DoxyCodeLine{\ \ \ \ ut\_timestamp\_t\ ts;}
\DoxyCodeLine{\ \ \ \ ut\_error\_t\ err\ =\ ut\_parse\_strict(\textcolor{stringliteral}{"{}2024-\/12-\/14T03:13:21.123456789Z"{}},\ \&ts);}
\DoxyCodeLine{\ \ \ \ \textcolor{keywordflow}{if}\ (err\ ==\ UT\_OK)\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ printf(\textcolor{stringliteral}{"{}Parsed:\ \%lld\ nanos\(\backslash\)n"{}},\ (\textcolor{keywordtype}{long}\ \textcolor{keywordtype}{long})ut\_to\_unix\_nanos(ts));}
\DoxyCodeLine{\ \ \ \ \}}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{\}}

\end{DoxyCode}
\hypertarget{md_README_autotoc_md3}{}\doxysection{\texorpdfstring{Building}{Building}}\label{md_README_autotoc_md3}

\begin{DoxyCode}{0}
\DoxyCodeLine{make\ \ \ \ \ \ \ \ \ \ \ \ \ \ \#\ Build\ library\ and\ tests}
\DoxyCodeLine{make\ test\ \ \ \ \ \ \ \ \ \#\ Run\ tests}
\DoxyCodeLine{make\ install\ \ \ \ \ \ \#\ Install\ to\ /usr/local\ (requires\ sudo)}
\DoxyCodeLine{make\ install\ PREFIX=/opt/local\ \ \#\ Custom\ prefix}

\end{DoxyCode}
\hypertarget{md_README_autotoc_md4}{}\doxysection{\texorpdfstring{Installation}{Installation}}\label{md_README_autotoc_md4}
After building\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{sudo\ make\ install}

\end{DoxyCode}


This installs\+:


\begin{DoxyItemize}
\item {\ttfamily /usr/local/lib/libuniversal\+\_\+timestamp.a}
\item {\ttfamily /usr/local/include/universal\+\_\+timestamp.h}
\item {\ttfamily /usr/local/lib/pkgconfig/universal\+\_\+timestamp.pc}
\end{DoxyItemize}\hypertarget{md_README_autotoc_md5}{}\doxysubsection{\texorpdfstring{Using with pkg-\/config}{Using with pkg-config}}\label{md_README_autotoc_md5}

\begin{DoxyCode}{0}
\DoxyCodeLine{gcc\ myapp.c\ \$(pkg-\/config\ -\/-\/cflags\ -\/-\/libs\ universal\_timestamp)}

\end{DoxyCode}
\hypertarget{md_README_autotoc_md6}{}\doxysection{\texorpdfstring{API Reference}{API Reference}}\label{md_README_autotoc_md6}
\hypertarget{md_README_autotoc_md7}{}\doxysubsection{\texorpdfstring{Core Functions}{Core Functions}}\label{md_README_autotoc_md7}
\tabulinesep=1mm
\begin{longtabu}spread 0pt [c]{*{2}{|X[-1]}|}
\hline
\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ Function   }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ Description    }\\\cline{1-2}
\endfirsthead
\hline
\endfoot
\hline
\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ Function   }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ Description    }\\\cline{1-2}
\endhead
{\ttfamily ut\+\_\+now()}   &Get current UTC timestamp    \\\cline{1-2}
{\ttfamily ut\+\_\+now\+\_\+monotonic()}   &Get monotonic timestamp (never goes backwards)    \\\cline{1-2}
{\ttfamily ut\+\_\+format()}   &Format timestamp to ISO-\/8601 string    \\\cline{1-2}
{\ttfamily ut\+\_\+parse\+\_\+strict()}   &Parse with strict validation    \\\cline{1-2}
{\ttfamily ut\+\_\+parse\+\_\+lenient()}   &Parse with relaxed rules    \\\cline{1-2}
{\ttfamily ut\+\_\+from\+\_\+unix\+\_\+nanos()}   &Create from Unix nanoseconds    \\\cline{1-2}
{\ttfamily ut\+\_\+to\+\_\+unix\+\_\+nanos()}   &Convert to Unix nanoseconds    \\\cline{1-2}
{\ttfamily ut\+\_\+get\+\_\+clock\+\_\+precision()}   &Detect hardware clock precision (0=ns, 1=µs, 2=ms, 3=s)   \\\cline{1-2}
\end{longtabu}
\hypertarget{md_README_autotoc_md8}{}\doxysubsection{\texorpdfstring{Calendar Conversions}{Calendar Conversions}}\label{md_README_autotoc_md8}
\tabulinesep=1mm
\begin{longtabu}spread 0pt [c]{*{2}{|X[-1]}|}
\hline
\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ Function   }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ Description    }\\\cline{1-2}
\endfirsthead
\hline
\endfoot
\hline
\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ Function   }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ Description    }\\\cline{1-2}
\endhead
{\ttfamily ut\+\_\+gregorian\+\_\+to\+\_\+thai()}   &Gregorian → Thai Buddhist Era (+543)    \\\cline{1-2}
{\ttfamily ut\+\_\+gregorian\+\_\+to\+\_\+dangi()}   &Gregorian → Korean Dangi (+2333)    \\\cline{1-2}
{\ttfamily ut\+\_\+gregorian\+\_\+to\+\_\+minguo()}   &Gregorian → Taiwan ROC (−1911)    \\\cline{1-2}
{\ttfamily ut\+\_\+to\+\_\+japanese\+\_\+era()}   &Get Japanese era and year    \\\cline{1-2}
{\ttfamily ut\+\_\+to\+\_\+iso\+\_\+week()}   &Get ISO week-\/date components   \\\cline{1-2}
\end{longtabu}
\hypertarget{md_README_autotoc_md9}{}\doxysection{\texorpdfstring{Specification}{Specification}}\label{md_README_autotoc_md9}
See wiki/specification.md for the full Universal Timestamp Specification.\hypertarget{md_README_autotoc_md10}{}\doxysection{\texorpdfstring{Project Structure}{Project Structure}}\label{md_README_autotoc_md10}

\begin{DoxyCode}{0}
\DoxyCodeLine{universal\_timestamp/}
\DoxyCodeLine{├──\ include/}
\DoxyCodeLine{│\ \ \ └──\ universal\_timestamp.h\ \ \ \ \#\ Public\ API}
\DoxyCodeLine{├──\ src/}
\DoxyCodeLine{│\ \ \ ├──\ core/}
\DoxyCodeLine{│\ \ \ │\ \ \ ├──\ ut\_internal.h\ \ \ \ \ \ \ \ \#\ Private\ declarations}
\DoxyCodeLine{│\ \ \ │\ \ \ └──\ ut\_core.c\ \ \ \ \ \ \ \ \ \ \ \ \#\ Date/time\ utilities}
\DoxyCodeLine{│\ \ \ ├──\ ut\_now.c\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \#\ now(),\ monotonic(),\ conversions}
\DoxyCodeLine{│\ \ \ ├──\ ut\_format.c\ \ \ \ \ \ \ \ \ \ \ \ \ \ \#\ Formatting}
\DoxyCodeLine{│\ \ \ ├──\ ut\_parse.c\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \#\ Parsing}
\DoxyCodeLine{│\ \ \ └──\ ut\_calendar.c\ \ \ \ \ \ \ \ \ \ \ \ \#\ Calendar\ conversions}
\DoxyCodeLine{├──\ test/}
\DoxyCodeLine{│\ \ \ └──\ test.c\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \#\ Test\ suite}
\DoxyCodeLine{├──\ build/\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \#\ Object\ files}
\DoxyCodeLine{├──\ Makefile}
\DoxyCodeLine{└──\ README.md}

\end{DoxyCode}
\hypertarget{md_README_autotoc_md11}{}\doxysection{\texorpdfstring{License}{License}}\label{md_README_autotoc_md11}
MIT License. See \mbox{[}LICENSE\mbox{]}(LICENSE) for details. 